<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Minecraft World Analyzer (1.8.8)</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      padding: 20px;
    }
    canvas {
      border: 1px solid #333;
      cursor: grab;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    #controls {
      margin-bottom: 10px;
    }
    #tooltip {
      position: absolute;
      background: #fff;
      border: 1px solid #333;
      padding: 5px;
      display: none;
      pointer-events: none;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h2>üó∫Ô∏è Minecraft World Analyzer (1.8.8)</h2>
  <div id="controls">
    <label>Seed: <input type="number" id="seed" value="12345"></label>
    <label>Your X (block): <input type="number" id="playerX" value="0"></label>
    <label>Your Z (block): <input type="number" id="playerZ" value="0"></label>
    <label>Map size (chunks): <input type="number" id="range" value="20"></label>
    <label><input type="checkbox" id="showSlime" checked> Show Slime Chunks</label>
    <label><input type="checkbox" id="showStructures" checked> Show Structures</label>
    <label><input type="checkbox" id="showTerrain" checked> Show Terrain</label>
    <label><input type="checkbox" id="showCaves"> Show Cave Preview</label>
    <button onclick="drawMap()">Generate Map</button>
    <button onclick="exportMap()">Export as PNG</button>
  </div>

  <canvas id="map" width="800" height="800"></canvas>
  <div id="tooltip"></div>

  <script>
    let offsetX = 0, offsetZ = 0, zoom = 1;
let dragging = false, dragStartX, dragStartY;
const canvas = document.getElementById('map');
const ctx = canvas.getContext('2d');
const tooltip = document.getElementById('tooltip');

function isSlimeChunk(seed, x, z) {
  let rnd = BigInt(seed) +
            BigInt(x) * BigInt(x) * 0x4c1906n +
            BigInt(x) * 0x5ac0dbn +
            BigInt(z) * BigInt(z) * 0x4307a7n +
            BigInt(z) * 0x5f24fen ^ 0x3ad8025fn;
  rnd = Number(rnd & 0xffffffffn);
  if (rnd > 0x7fffffff) rnd -= 0x100000000;
  return (rnd % 10) === 0;
}

function pseudoBiomeColor(x, z, seed) {
  const val = Math.abs((x * 49632 + z * 325176 + parseInt(seed)) % 100);
  if (val < 20) return "#87ceeb"; // ocean
  if (val < 40) return "#f4a460"; // desert
  if (val < 60) return "#98fb98"; // plains
  if (val < 80) return "#228b22"; // forest
  return "#d2b48c"; // hills
}

function caveDensity(x, z, seed) {
  const val = Math.abs(Math.sin((x + seed) * 0.1) + Math.cos((z - seed) * 0.1));
  return val > 1.5;
}

function isVillageChunk(x, z) {
  return (x % 32 === 0 && z % 32 === 0);
}

function isTempleChunk(x, z) {
  return (x % 30 === 0 && z % 30 === 0);
}

function isStrongholdChunk(x, z, seed) {
  const ringRadius = 128;
  const dx = x * 16;
  const dz = z * 16;
  const dist = Math.sqrt(dx * dx + dz * dz);
  return Math.abs(dist - ringRadius) < 16;
}

function drawMap() {
  const seed = document.getElementById('seed').value;
  const px = parseInt(document.getElementById('playerX').value);
  const pz = parseInt(document.getElementById('playerZ').value);
  const range = parseInt(document.getElementById('range').value);
  const showSlime = document.getElementById('showSlime').checked;
  const showStructures = document.getElementById('showStructures').checked;
  const showTerrain = document.getElementById('showTerrain').checked;
  const showCaves = document.getElementById('showCaves').checked;

  const chunkX = Math.floor(px / 16);
  const chunkZ = Math.floor(pz / 16);

  offsetX = chunkX - range;
  offsetZ = chunkZ - range;

  const scale = (canvas.width / (range * 2 + 1)) * zoom;
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let x = 0; x <= range * 2; x++) {
    for (let z = 0; z <= range * 2; z++) {
      const cx = offsetX + x;
      const cz = offsetZ + z;
      const screenX = x * scale;
      const screenZ = z * scale;

      if (showTerrain) {
        ctx.fillStyle = pseudoBiomeColor(cx, cz, seed);
        ctx.fillRect(screenX, screenZ, scale, scale);
      }

      if (showCaves && caveDensity(cx, cz, seed)) {
        ctx.fillStyle = "rgba(128,128,128,0.3)";
        ctx.fillRect(screenX, screenZ, scale, scale);
      }

      if (showSlime && isSlimeChunk(seed, cx, cz)) {
        ctx.fillStyle = "rgba(0,255,0,0.5)";
        ctx.fillRect(screenX, screenZ, scale, scale);
      }

      if (showStructures) {
        if (isVillageChunk(cx, cz)) {
          ctx.fillStyle = "#ff9900";
          ctx.fillRect(screenX + scale/4, screenZ + scale/4, scale/2, scale/2);
        }
        if (isTempleChunk(cx, cz)) {
          ctx.fillStyle = "#800080";
          ctx.beginPath();
          ctx.arc(screenX + scale/2, screenZ + scale/2, scale/4, 0, 2 * Math.PI);
          ctx.fill();
        }
        if (isStrongholdChunk(cx, cz, seed)) {
          ctx.fillStyle = "#666";
          ctx.beginPath();
          ctx.moveTo(screenX + scale/2, screenZ + scale/4);
          ctx.lineTo(screenX + scale*3/4, screenZ + scale/2);
          ctx.lineTo(screenX + scale/2, screenZ + scale*3/4);
          ctx.lineTo(screenX + scale/4, screenZ + scale/2);
          ctx.closePath();
          ctx.fill();
        }
      }

      ctx.strokeStyle = "#999";
      ctx.strokeRect(screenX, screenZ, scale, scale);
    }
  }

  ctx.fillStyle = "#ff0000";
  ctx.beginPath();
  ctx.arc(canvas.width / 2, canvas.height / 2, scale / 3, 0, 2 * Math.PI);
  ctx.fill();
}

canvas.addEventListener("wheel", e => {
  zoom *= e.deltaY < 0 ? 1.1 : 0.9;
  drawMap();
});

canvas.addEventListener("mousedown", e => {
  dragging = true;
  dragStartX = e.offsetX;
  dragStartY = e.offsetY;
});

canvas.addEventListener("mouseup", () => dragging = false);
canvas.addEventListener("mouseleave", () => dragging = false);

canvas.addEventListener("mousemove", e => {
  if (dragging) {
    offsetX -= Math.round((e.offsetX - dragStartX) / (canvas.width / 40));
    offsetZ -= Math.round((e.offsetY - dragStartY) / (canvas.height / 40));
    dragStartX = e.offsetX;
    dragStartY = e.offsetY;
    drawMap();
  } else {
    const range = parseInt(document.getElementById('range').value);
    const scale = canvas.width / (range * 2 + 1);
    const x = Math.floor(e.offsetX / scale);
    const z = Math.floor(e.offsetY / scale);
    const cx = offsetX + x;
    const cz = offsetZ + z;
    const seed = document.getElementById('seed').value;

    let info = `Chunk (${cx}, ${cz})`;
    if (document.getElementById('showSlime').checked && isSlimeChunk(seed, cx, cz)) info += " | Slime Chunk";
    if (document.getElementById('showStructures').checked && isVillageChunk(cx, cz)) info += " | Village";
    if (document.getElementById('showStructures').checked && isTempleChunk(cx, cz)) info += " | Temple";
    if (document.getElementById('showStructures').checked && isStrongholdChunk(cx, cz, seed)) info += " | Stronghold";
    if (document.getElementById('showCaves').checked && caveDensity(cx, cz, seed)) info += " | Cave Area";

    tooltip.style.left = e.pageX + 10 + "px";
    tooltip.style.top = e.pageY + 10 + "px";
    tooltip.innerText = info;
    tooltip.style.display = "block";
  }
});

canvas.addEventListener("mouseout", () => tooltip.style.display = "none");

function exportMap() {
  const link = document.createElement('a');
  link.download = 'minecraft_map.png';
  link.href = canvas.toDataURL();
  link.click();
}

  </script>
</body>
</html>
